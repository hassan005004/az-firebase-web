<div>
  <ul>
    <li>Add data-ref="reviews" to target table</li>
    <li>Add data-col="name" to td</li>
  </ul>
</div>
<table class="firebase-to-table" data-ref="reviews">
  <thead>
    <th>Name</th>
    <th>Review</th>
  </thead>
  <tbody>
    <tr>
      <td data-col="name"></td>
      <td data-col="review"></td>
    </tr>
  </tbody>
</table>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "x",
    authDomain: "x",
    databaseURL: "x",
    projectId: "x",
    storageBucket: "x",
    messagingSenderId: "x",
    appId: "x"
  };
</script>

<script>
	$(document).ready(function(){

    // function we created for data show + just copy
    $.fn.firebaseToTable = async function(element) {
      firebase.initializeApp(firebaseConfig)
      ref = $(element).attr('data-ref');
      console.log(ref);

      const dataFromDb = firebase.database().ref(ref)
      .limitToLast(20);

      data = null;
      // $(element).find('tbody').empty();

      dataFromDb.on('value', (snapshot) => {
        const $clonedRows = $(element).find('tbody tr').clone();
        data = snapshot.val();
        console.log(data);
        if (data) {
          // Loop through each item in the data
          Object.keys(data).forEach((key) => {
            const item = data[key];
            // Create a new table row
            const newRow = $clonedRows.clone();
            // Loop through each column in the table
            newRow.find('[data-col]').each(function() {
              const colName = $(this).attr('data-col');
              // Set the text of the corresponding column with data from Firebase
              $(this).text(item[colName]);
            });
            // Append the new row to the table body
            $(element).find('tbody').append(newRow);
          });
        }
      });
      return data;
    }

    // call function to load data
    $.fn.firebaseToTable('.firebase-to-table');

	});
</script>